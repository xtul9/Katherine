# Katherine Orchestrator Configuration
# Copy this file to .env and adjust as needed

# Server settings
KATHERINE_HOST=0.0.0.0
KATHERINE_PORT=10000
KATHERINE_DEBUG=false

# =============================================================================
# LLM (OpenRouter + DeepSeek V3)
# =============================================================================
KATHERINE_OPENROUTER_API_KEY=sk-or-v1-your-api-key-here
KATHERINE_OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
KATHERINE_OPENROUTER_MODEL=deepseek/deepseek-v3.2 # use whatever you want, but

# Site info for OpenRouter (optional but recommended for rankings)
KATHERINE_OPENROUTER_SITE_URL=http://localhost:10001
KATHERINE_OPENROUTER_SITE_NAME=Katherine

# =============================================================================
# Embeddings
# =============================================================================
# Mode: "api" or "local"
# - "api": Uses OpenAI embeddings API directly (~$0.02/1M tokens)
#          NOTE: OpenRouter does NOT support embeddings! You need an OpenAI API key.
# - "local": Uses sentence-transformers (free, but requires Python 3.10-3.12)
KATHERINE_EMBEDDING_MODE=api

# OpenAI API key for embeddings (required if EMBEDDING_MODE=api)
# Get yours at: https://platform.openai.com/api-keys
KATHERINE_OPENAI_API_KEY=sk-your-openai-api-key-here
KATHERINE_OPENAI_EMBEDDING_BASE_URL=https://api.openai.com/v1
KATHERINE_OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Local embedding model (only used if EMBEDDING_MODE=local)
KATHERINE_EMBEDDING_MODEL=all-MiniLM-L6-v2

# =============================================================================
# ChromaDB (Vector Store)
# =============================================================================
KATHERINE_CHROMA_PERSIST_DIRECTORY=./data/chroma
KATHERINE_CHROMA_COLLECTION_NAME=katherine_memories

# =============================================================================
# RAG Settings
# =============================================================================
KATHERINE_RETRIEVAL_TOP_K=5
KATHERINE_MIN_SIMILARITY_THRESHOLD=0.3

# Deduplication thresholds
# Write-time: block true duplicates (very high similarity, e.g., double imports)
KATHERINE_DEDUP_WRITE_THRESHOLD=0.95
# Read-time: cluster similar memories, serve only the most relevant from each cluster
KATHERINE_DEDUP_READ_THRESHOLD=0.85

# Conversation settings
KATHERINE_CONVERSATION_WINDOW=10
KATHERINE_AUTO_SAVE_INTERVAL=5

# =============================================================================
# Context Window (Time-based)
# =============================================================================
# Messages older than this (in hours) are "expired" and should be archived
# to ChromaDB as memories. Active messages stay in direct LLM context.
KATHERINE_CONTEXT_WINDOW_HOURS=24
# Minimum messages to always include in context (even if older than window).
# Ensures conversation continuity when user returns after a long break.
KATHERINE_MIN_CONTEXT_MESSAGES=10

# Token limits
KATHERINE_MAX_CONTEXT_TOKENS=4096
KATHERINE_MAX_MEMORY_INJECTION_TOKENS=1024

# =============================================================================
# Persona Configuration (Privacy)
# =============================================================================
# These settings keep personal details out of the codebase.
# The persona file contains the AI's personality/system prompt.

# Name for the human user (used in memory formatting and prompts)
KATHERINE_USER_NAME=Joe

# Name for the AI character (used in memory formatting and prompts)
KATHERINE_AI_NAME=Katherine

# Path to the persona file (system prompt)
# Copy persona.example.txt to persona.txt and customize it.
KATHERINE_PERSONA_FILE=persona.txt
